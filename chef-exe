1. Download the Chef-server package 
      wget  https://packages.chef.io/files/stable/chef-server/12.17.33/ubuntu/16.04/chef-server-core_12.17.33-1_amd64.deb
      sudo dpkg -i chef-server-core_12.17.33-1_amd64.deb
      sudo chef-server-ctl reconfigure
      sudo chef-server-ctl user-create sharique Sharique Masood sharique.masood@tothenew.com 'mypassword' --filename /home/ubuntu/sharique.pem
      sudo chef-server-ctl org-create ttn 'To The New' --association_user sharique --file /home/ubuntu/ttn-validator.pem
      sudo chef-server-ctl install chef-manage
      sudo chef-server-ctl reconfigure
      sudo chef-manage-ctl reconfigure
Note: go to web browser add ip of your machine open chef-manage ui . enter username and password then login
Note: If you are using ec2 instance as a chef-server update the instance hostname as public hostname.

   Download the Chefdk package
      #wget https://packages.chef.io/files/stable/chefdk/3.3.23/ubuntu/16.04/chefdk_3.3.23-1_amd64.deb
      #sudo dpkg -i chefdk_3.3.23-1_amd64.deb
      #knife configure               Note: used to interact with chef server
      #chef generate repo mycookbook
      #cd mycookbook
      #knife ssl fetch
      #knife ssl check
      
      
Note:  creating first node that will be managed by chef server
       and  deploy configuration changes to this node.
       #knife bootstrap ec2-18-191-232-22.us-east-2.compute.amazonaws.com -N node1 -x ubuntu -P 'ttn' --sudo
       #knife node list


2. chef-validator.pem
      This key is generated during the creation of an organization. The chef-validator.pem is 
      already trusted by the Chef Server and the chef-client uses it to generate a public/private 
      keypair specifically for a given chef-client.
      
   client.pem
      The private key generated using the chef-validator.pem by the chef-client during initial 
      registration with a Chef Server When the chef-client makes a request to the Chef server, 
      the chef-client authenticates each request using a private key named client.pem.
      
    admin.pem
      This key is generated by the chef server when a new User is created.A person needs this key to 
      authenticate against a Chef Server when doing things with knife.
      
      If chef-validator.pem is missing then he initial chef-client run will fail.
      
3. Download the starter Kit from chef-server ui . Extract it then go to that folder run 
   #knife ssl fetch.
   #chef generate cookbook cookbooks/webserver
   #knife upload cookbooks/webserver
   #knife node run_list add node1 'recipe[webserver::default]'
   #knife node show node1
   #knife ssh 'name:node1' 'sudo chef-client' -x ubuntu                        Note: enter the node password
   
6.#knife node create webserver
      in run_lst section add your webserver recipe
      "run_list": [
            "recipe[webserver:default]",
  ],
    
   #knife node create database
       in run_list section add your database recipe
       "run_list": [
            "recipe[mysql::default]",
            "recipe[mongodb::default]"
  ],
  knife node run_list add node1 'role[webserver]'
  knife node run_list add centos 'role[database]'
  knide node show node1 -a run_list
  
  ---configure ec2 plugin-------
  #chef gem install knife-ec2
  #knife ec2 server list
  
  -----configure Acesskey and Secret key in .chef/knife.rb and add Below line also add the aws pem file in chef-repo directory
knife[:aws_access_key_id] = "AAAAAAAAAAAAAAAAAAAA"
knife[:aws_secret_access_key] = "kkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkk"

  
